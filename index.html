<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>–ì–∞—Ä–∞–Ω—Ç-–ñ–∏–ª—å–µ</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* –°–¢–ò–õ–ò –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô - –ö–û–ü–ò–†–£–ï–ú –ò–ó –î–ï–ú–û–í–ï–†–°–ò–ò */
* { margin: 0; padding: 0; box-sizing: border-box; }
:root {
--primary: #1E3A8A;
--primary-dark: #172554;
--secondary: #BFDBFE;
--accent: #D4AF37;
--text: #000000;
--bg: #FFFFFF;
--border: #E2E8F0;
--text-secondary: #64748B;
--shadow-sm: 0 2px 8px rgba(30, 58, 138, 0.08);
--shadow-md: 0 6px 16px rgba(30, 58, 138, 0.12);
--shadow-lg: 0 12px 28px rgba(30, 58, 138, 0.18);
--transition: cubic-bezier(0.22, 0.61, 0.36, 1);
}
body {
background: var(--bg);
color: var(--text);
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
padding: 20px 16px 90px;
line-height: 1.5;
position: relative;
overflow-x: hidden;
touch-action: manipulation;
}
/* SPLASH */
#splash {
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: var(--bg);
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
z-index: 999999;
opacity: 1;
transition: opacity 0.6s ease;
}
.splash-logo {
width: 100px;
height: 100px;
object-fit: cover;
margin-bottom: 24px;
animation: bounce 1.4s infinite ease-in-out;
}
@keyframes bounce {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-20px); }
}
.splash-text {
color: var(--text-secondary);
font-size: 16px;
font-weight: 500;
text-align: center;
}
.hammer-anim {
display: inline-block;
animation: hammerTap 1.4s infinite ease-in-out;
}
@keyframes hammerTap {
0%, 100% { transform: translateY(0) rotate(0); }
30% { transform: translateY(6px) rotate(5deg); }
50% { transform: translateY(0) rotate(0); }
}
.page {
display: none;
opacity: 0;
transform: translateY(20px);
animation: pageEnter 0.8s forwards var(--transition);
}
.active {
display: block;
}
@keyframes pageEnter {
to {
opacity: 1;
transform: translateY(0);
}
}
/* === –ö–ê–†–¢–û–ß–ö–ò === */
.card-item {
background: var(--bg);
border-radius: 20px;
position: relative;
overflow: hidden;
transition: all 0.4s var(--transition);
box-shadow: var(--shadow-md);
border: 2px solid transparent;
cursor: pointer;
display: flex;
flex-direction: column;
height: 100%;
}
.card-item__content {
padding: 16px;
display: flex;
flex-direction: column;
gap: 12px;
height: 100%;
}
.card-item__image-container {
width: 100%;
height: 110px;
border-radius: 12px;
overflow: hidden;
position: relative;
cursor: pointer;
transition: transform 0.3s ease;
/* –£–ë–†–ê–õ–ò –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ –û–¢–ö–†–´–¢–¨ –§–û–¢–û –ò–ó –ö–ê–†–¢–û–ß–ö–ò */
}
.card-item__image-container:hover {
transform: scale(1.02);
}
.card-item__image-slide {
width: 100%;
height: 100%;
background-size: cover;
background-position: center;
position: absolute;
top: 0;
left: 0;
display: none;
transition: opacity 0.4s var(--transition);
}
.card-item__image-slide.active {
display: block;
}
.card-item__text {
display: flex;
flex-direction: column;
gap: 4px;
}
.card-item__district {
font-size: 12px;
color: var(--text-secondary);
font-weight: 600;
}
.card-item__title {
font-size: 16px;
font-weight: 700;
color: var(--text);
line-height: 1.3;
}
.card-item__description {
font-size: 13px;
color: var(--text-secondary);
line-height: 1.4;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}
.card-item__footer {
display: flex;
justify-content: space-between;
align-items: center;
margin-top: auto;
gap: 6px;
}
.card-item__price {
font-weight: 700;
font-size: 13px;
color: var(--primary);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
min-width: 0;
}
.card-item__button {
width: 28px;
height: 28px;
background: var(--accent);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
color: white;
cursor: pointer;
transition: all 0.3s ease;
flex-shrink: 0;
position: relative;
overflow: hidden;
}
.card-item__button::after {
content: '';
position: absolute;
width: 100%;
height: 100%;
background: rgba(255, 255, 255, 0.3);
border-radius: 50%;
transform: scale(0);
opacity: 0;
transition: all 0.4s ease;
}
.card-item__button:active::after {
transform: scale(1.5);
opacity: 1;
}
.card-item:hover {
transform: translateY(-6px);
box-shadow: var(--shadow-lg);
border-color: var(--accent);
}
.card-item:hover .card-item__button {
transform: scale(1.1);
box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.3);
}
/* –ò–∑–±—Ä–∞–Ω–Ω–æ–µ */
.favorite-btn {
position: absolute;
top: 12px;
right: 12px;
width: 28px;
height: 28px;
cursor: pointer;
z-index: 3;
background: rgba(255, 255, 255, 0.95);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 2px 4px rgba(0,0,0,0.15);
border: 2px solid transparent;
transition: all 0.2s ease;
}
.favorite-btn:hover {
transform: scale(1.15);
border-color: var(--accent);
}
.favorite-btn input { display: none; }
.favorite-btn svg {
width: 18px;
height: 18px;
fill: transparent;
stroke: var(--primary);
stroke-width: 2;
transition: all 0.2s ease;
}
.favorite-btn input:checked + svg {
fill: var(--accent);
stroke: var(--accent);
}
/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
.card {
background: var(--bg);
padding: 20px;
border-radius: 18px;
margin: 18px 0;
border: 1px solid var(--border);
box-shadow: var(--shadow-sm);
}
/* –ö–Ω–æ–ø–∫–∞ "–ö—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å" */
.find-home-btn {
background: transparent;
border: 2px solid var(--primary);
color: var(--primary);
padding: 16px 24px;
border-radius: 18px;
font-family: 'Inter', sans-serif;
font-weight: 600;
font-size: 17px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 12px;
margin: 0 auto 32px;
max-width: 320px;
transition: all 0.25s ease;
box-shadow: var(--shadow-md);
}
.find-home-btn:hover {
background: rgba(30, 58, 138, 0.05);
transform: translateY(-3px);
box-shadow: var(--shadow-lg);
}
.find-home-btn svg {
width: 22px;
height: 22px;
stroke: currentColor;
stroke-width: 2;
}
/* –ë–∞–Ω–Ω–µ—Ä */
.banner {
text-align: center;
margin: 32px 0;
}
.banner-container {
width: 100%;
max-width: 520px;
border-radius: 18px;
overflow: hidden;
background: var(--bg);
border: 1px solid var(--border);
margin: 0 auto;
position: relative;
touch-action: pan-y;
box-shadow: var(--shadow-md);
}
.banner-slides {
display: flex;
width: 200%;
height: 150px;
transition: transform 0.8s var(--transition);
}
.banner-slide img {
width: 100%;
height: 100%;
object-fit: cover;
}
.banner-text {
margin-top: 14px;
font-weight: 700;
color: var(--primary);
font-size: 18px;
display: flex;
align-items: center;
gap: 8px;
}
.banner-dots {
display: flex;
justify-content: center;
gap: 10px;
margin-top: 16px;
}
.banner-dot {
width: 8px;
height: 8px;
border-radius: 50%;
background: #cbd5e1;
cursor: pointer;
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}
.banner-dot::before {
content: '';
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%) scale(0);
width: 100%;
height: 100%;
background: var(--accent);
border-radius: 50%;
transition: transform 0.3s ease;
}
.banner-dot.active::before {
transform: translate(-50%, -50%) scale(1.5);
}
/* –°–µ–∫—Ü–∏–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏ */
.section-header {
display: flex;
justify-content: space-between;
align-items: center;
margin: 28px 0 18px;
}
.section-title {
font-size: 20px;
font-weight: 700;
color: var(--text);
display: flex;
align-items: center;
gap: 10px;
}
.section-icon {
width: 24px;
height: 24px;
object-fit: contain;
vertical-align: middle;
filter: brightness(0) saturate(100%) invert(11%) sepia(52%) saturate(4812%) hue-rotate(206deg) brightness(94%) contrast(92%);
}
/* –ë–æ–ª—å—à–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
.category-card {
background: var(--bg);
border: 2px solid var(--primary);
border-radius: 18px;
padding: 24px 20px;
text-align: center;
font-weight: 600;
font-size: 18px;
color: var(--primary);
cursor: pointer;
transition: all 0.25s ease;
margin-bottom: 16px;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
min-height: 100px;
box-shadow: var(--shadow-sm);
}
.category-card:hover {
background: var(--primary);
color: white;
transform: translateY(-4px);
box-shadow: var(--shadow-lg);
}
.category-card:hover .category-icon {
filter: brightness(0) invert(1);
}
.category-icon {
width: 32px;
height: 32px;
margin-bottom: 12px;
object-fit: contain;
display: block;
filter: brightness(0) saturate(100%) invert(11%) sepia(52%) saturate(4812%) hue-rotate(206deg) brightness(94%) contrast(92%);
}
/* –ö–Ω–æ–ø–∫–∏ */
.view-all-btn,
.btn,
.btn-remove,
.btn-order,
.btn-support,
.view-all-requests-btn {
border: none;
border-radius: 14px;
font-family: 'Inter', sans-serif;
font-weight: 600;
cursor: pointer;
transition: all 0.25s ease;
display: inline-flex;
align-items: center;
justify-content: center;
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
box-shadow: var(--shadow-md);
}
.view-all-btn:hover,
.btn:hover,
.btn-remove:hover,
.btn-order:hover,
.btn-support:hover,
.view-all-requests-btn:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
}
.view-all-btn {
padding: 8px 18px;
font-size: 14px;
}
.btn {
padding: 10px 18px;
font-size: 15px;
}
.view-all-requests-btn {
padding: 10px 20px;
font-size: 15px;
margin-top: 16px;
width: 100%;
max-width: 300px;
}
.btn:active {
transform: scale(0.96) translateY(-1px);
box-shadow: 0 2px 8px rgba(30, 58, 138, 0.25);
}
/* –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ - –°–¢–†–ï–õ–ö–ê –ë–ï–ó –¢–ï–ö–°–¢–ê */
.btn-back {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
width: 40px;
height: 40px;
border: none;
border-radius: 50%;
font-family: 'Inter', sans-serif;
font-weight: 600;
cursor: pointer;
transition: all 0.25s ease;
display: flex;
align-items: center;
justify-content: center;
box-shadow: var(--shadow-md);
flex-shrink: 0;
}
.btn-back:hover {
transform: translateY(-2px) scale(1.05);
box-shadow: var(--shadow-lg);
background: linear-gradient(135deg, var(--primary-dark), #0f172a);
}
.btn-back:active {
transform: scale(0.95) translateY(-1px);
box-shadow: 0 2px 8px rgba(30, 58, 138, 0.25);
}
.btn-back svg {
width: 20px;
height: 20px;
stroke: white;
stroke-width: 2.5;
fill: none;
}
/* –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ */
.offers-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
gap: 18px;
width: 100%;
}
/* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
.bottom-nav {
position: fixed;
bottom: 0;
left: 0;
right: 0;
display: flex;
justify-content: space-between;
align-items: center;
background: var(--bg);
padding: 12px 16px 20px;
border-top: 1px solid var(--border);
z-index: 1000;
box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
gap: 0;
}
.nav-btn {
background: none;
border: none;
color: #94a3b8;
font-size: 11px;
display: flex;
flex-direction: column;
align-items: center;
gap: 6px;
font-family: 'Inter', sans-serif;
font-weight: 500;
cursor: pointer;
padding: 8px 5px;
border-radius: 12px;
transition: all 0.2s ease;
flex: 1;
min-width: 0;
}
.nav-btn.active {
color: var(--primary);
background: rgba(30, 58, 138, 0.08);
}
.nav-icon {
width: 24px;
height: 24px;
stroke: currentColor;
stroke-width: 2;
fill: none;
}
/* –ë–æ–ª—å—à–∞—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ + */
.nav-btn-add {
position: relative;
width: 60px;
height: 60px;
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
border: none;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
box-shadow: var(--shadow-lg);
transition: all 0.2s ease;
z-index: 1001;
}
.nav-btn-add:hover {
transform: scale(1.05);
box-shadow: 0 8px 24px rgba(30, 58, 138, 0.3);
}
.nav-btn-add:active {
transform: scale(0.95);
}
.nav-btn-add svg {
width: 32px;
height: 32px;
stroke: white;
stroke-width: 3;
fill: none;
}
/* –ü–ª–∞–≤–∞—é—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞ */
#floating-cart {
position: fixed;
bottom: 84px;
right: 22px;
width: 60px;
height: 60px;
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
z-index: 10000;
opacity: 0;
transform: scale(0);
transition: all 0.4s var(--transition);
box-shadow: var(--shadow-lg);
}
#floating-cart.visible {
opacity: 1;
transform: scale(1);
}
#floating-cart img {
width: 32px;
height: 32px;
filter: brightness(0) invert(1);
}
#cart-badge {
position: absolute;
top: -6px;
right: -6px;
background: var(--accent);
color: white;
font-size: 11px;
font-weight: bold;
width: 22px;
height: 22px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 2px 5px rgba(0,0,0,0.3);
animation: pulse 2s infinite;
}
@keyframes pulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.1); }
}
/* –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
#property-detail .card {
margin-top: 0;
}
.property-gallery {
position: relative;
width: 100%;
height: 240px;
border-radius: 16px;
overflow: hidden;
margin-bottom: 20px;
touch-action: pan-y;
}
.property-gallery img {
width: 100%;
height: 100%;
object-fit: cover;
}
.gallery-nav {
position: absolute;
top: 50%;
transform: translateY(-50%);
background: rgba(0,0,0,0.5);
color: white;
width: 32px;
height: 32px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
z-index: 10;
}
.gallery-nav.prev { left: 12px; }
.gallery-nav.next { right: 12px; }
.gallery-dots {
display: flex;
justify-content: center;
gap: 8px;
margin-top: 12px;
}
.gallery-dot {
width: 8px;
height: 8px;
border-radius: 50%;
background: #cbd5e1;
cursor: pointer;
}
.gallery-dot.active {
background: var(--accent);
}
.property-title {
font-size: 22px;
font-weight: 700;
margin-bottom: 8px;
color: var(--text);
}
.property-address {
font-size: 15px;
color: var(--text-secondary);
margin-bottom: 8px;
font-style: italic;
}
.property-price {
font-size: 24px;
font-weight: 700;
color: var(--primary);
margin-bottom: 18px;
}
.property-description {
color: var(--text);
line-height: 1.65;
margin-bottom: 24px;
font-size: 15px;
}
.property-actions {
display: flex;
gap: 14px;
}
.property-actions button {
flex: 1;
}
.empty-state {
text-align: center;
color: var(--text-secondary);
padding: 36px 20px;
font-style: italic;
font-size: 16px;
}
/* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –ò–ó–ë–†–ê–ù–ù–û–ï */
.empty-favorites {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 60px 20px;
color: var(--text-secondary);
}
.empty-favorites svg {
width: 64px;
height: 64px;
margin-bottom: 24px;
stroke: var(--text-secondary);
stroke-width: 1.5;
fill: none;
}
.empty-favorites h3 {
font-weight: 600;
font-size: 18px;
margin-bottom: 8px;
color: var(--text);
}
.empty-favorites p {
font-size: 15px;
line-height: 1.5;
}
/* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –ö–û–†–ó–ò–ù–ê */
.empty-cart {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 60px 20px;
color: var(--text-secondary);
}
.empty-cart .cart-icon {
position: relative;
width: 80px;
height: 80px;
margin-bottom: 24px;
}
.empty-cart .cart-icon img {
width: 100%;
height: 100%;
object-fit: contain;
filter: brightness(0) saturate(100%) invert(47%) sepia(7%) saturate(1414%) hue-rotate(176deg) brightness(93%) contrast(86%);
}
.empty-cart .cart-icon .cross {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%) rotate(45deg);
width: 40px;
height: 4px;
background: var(--text-secondary);
border-radius: 2px;
}
.empty-cart .cart-icon .cross::after {
content: '';
position: absolute;
top: 50%;
left: 50%;
width: 4px;
height: 40px;
background: var(--text-secondary);
border-radius: 2px;
transform: translate(-50%, -50%);
}
.empty-cart h3 {
font-weight: 600;
font-size: 18px;
margin-bottom: 8px;
color: var(--text);
}
.empty-cart p {
font-size: 15px;
line-height: 1.5;
margin-bottom: 24px;
}
.empty-cart .btn {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
padding: 12px 24px;
font-size: 16px;
border-radius: 16px;
font-weight: 600;
box-shadow: var(--shadow-md);
}
.empty-cart .btn:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
}
/* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ */
.support-option {
display: flex;
align-items: center;
gap: 12px;
width: 100%;
padding: 14px 16px;
background: #f8fafc;
border: 1px solid var(--border);
border-radius: 14px;
font-family: 'Inter', sans-serif;
font-weight: 600;
font-size: 15px;
color: var(--primary);
cursor: pointer;
transition: all 0.2s ease;
text-align: left;
margin-bottom: 12px;
}
.support-option:last-child {
margin-bottom: 0;
}
.support-option:hover {
background: #eef4ff;
border-color: var(--primary);
transform: translateY(-1px);
box-shadow: var(--shadow-sm);
}
.support-option svg {
width: 20px;
height: 20px;
stroke: currentColor;
stroke-width: 2;
flex-shrink: 0;
}
/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ñ–æ—Ç–æ - –¢–û–õ–¨–ö–û –í –î–ï–¢–ê–õ–¨–ù–û–ô –°–¢–†–ê–ù–ò–¶–ï */
.modal {
display: none;
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.95);
z-index: 9999999;
justify-content: center;
align-items: center;
touch-action: none;
}
.modal.active {
display: flex;
}
.modal-content {
position: relative;
width: 100%;
height: 100%;
display: flex;
justify-content: center;
align-items: center;
}
.modal-img {
max-width: 95%;
max-height: 90%;
object-fit: contain;
border: 3px solid white;
border-radius: 8px;
box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
transition: transform 0.3s ease;
}
.modal-img:hover {
transform: scale(1.02);
}
.modal-close {
position: absolute;
top: 20px;
right: 20px;
width: 40px;
height: 40px;
background: rgba(0, 0, 0, 0.5);
color: white;
border: none;
border-radius: 50%;
font-size: 24px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
z-index: 100;
transition: all 0.2s ease;
}
.modal-close:hover {
background: rgba(0, 0, 0, 0.8);
transform: scale(1.1);
}
.modal-nav {
position: absolute;
top: 50%;
transform: translateY(-50%);
background: rgba(0, 0, 0, 0.6);
color: white;
width: 50px;
height: 50px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
z-index: 90;
font-size: 32px;
user-select: none;
transition: all 0.2s ease;
}
.modal-nav:hover {
background: rgba(0, 0, 0, 0.8);
transform: translateY(-50%) scale(1.1);
}
.modal-nav.prev { left: 20px; }
.modal-nav.next { right: 20px; }
.modal-counter {
position: absolute;
bottom: 20px;
left: 50%;
transform: translateX(-50%);
color: white;
font-size: 14px;
font-weight: 600;
background: rgba(0, 0, 0, 0.5);
padding: 6px 12px;
border-radius: 20px;
}
/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */
.phone-modal {
display: none;
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.6);
z-index: 99999999;
justify-content: center;
align-items: center;
}
.phone-modal.active {
display: flex;
}
.phone-modal-content {
background: var(--bg);
border-radius: 20px;
padding: 30px;
width: 90%;
max-width: 400px;
box-shadow: var(--shadow-lg);
text-align: center;
position: relative;
}
.phone-modal-title {
font-size: 20px;
font-weight: 700;
color: var(--text);
margin-bottom: 16px;
}
.phone-modal-text {
font-size: 15px;
color: var(--text-secondary);
margin-bottom: 24px;
line-height: 1.6;
}
.phone-input {
width: 100%;
padding: 14px 16px;
border: 2px solid var(--border);
border-radius: 14px;
font-family: 'Inter', sans-serif;
font-size: 16px;
color: var(--text);
background: var(--bg);
margin-bottom: 20px;
transition: all 0.2s ease;
}
.phone-input:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 4px rgba(30, 58, 138, 0.1);
}
.phone-input::placeholder {
color: var(--text-secondary);
}
.phone-modal-buttons {
display: flex;
gap: 12px;
}
.phone-modal-btn {
flex: 1;
padding: 12px;
font-size: 15px;
font-weight: 600;
border-radius: 14px;
border: none;
cursor: pointer;
transition: all 0.2s ease;
}
.phone-modal-btn.cancel {
background: #E2E8F0;
color: var(--text);
}
.phone-modal-btn.cancel:hover {
background: #CBD5E1;
}
.phone-modal-btn.submit {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
box-shadow: var(--shadow-md);
}
.phone-modal-btn.submit:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
}
.phone-modal-btn.submit:disabled {
background: #94a3b8;
cursor: not-allowed;
transform: none;
box-shadow: var(--shadow-sm);
}
/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¢–∞–∏–ª–∞–Ω–¥–∞ */
.thailand-page {
padding: 20px 0;
text-align: center;
}
.thailand-title {
font-size: 24px;
font-weight: 700;
color: var(--primary);
margin-bottom: 10px;
}
.thailand-subtitle {
font-size: 16px;
color: var(--text-secondary);
margin-bottom: 30px;
}
.thailand-banner-grid {
display: flex;
flex-direction: column;
gap: 16px;
width: 100%;
}
.thailand-banner-card {
position: relative;
height: 180px;
border-radius: 16px;
overflow: hidden;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: var(--shadow-md);
}
.thailand-banner-card:hover {
transform: translateY(-4px);
box-shadow: var(--shadow-lg);
box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}
.thailand-banner-card img {
width: 100%;
height: 100%;
object-fit: cover;
}
.thailand-banner-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
}
.thailand-banner-card .banner-title {
position: absolute;
bottom: 12px;
left: 12px;
right: 12px;
color: white;
font-weight: 700;
font-size: 14px;
text-shadow: 0 2px 4px rgba(0,0,0,0.5);
text-align: left;
}
.thailand-offers-section {
margin-top: 24px;
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ –≤ –¥–µ—Ç–∞–ª—è—Ö */
.detail-gallery-container {
position: relative;
width: 100%;
height: 240px;
border-radius: 16px;
overflow: hidden;
margin-bottom: 20px;
touch-action: pan-y;
box-shadow: var(--shadow-md);
cursor: pointer;
}
.detail-gallery-slides {
display: flex;
width: 100%;
height: 100%;
transition: transform 0.5s var(--transition);
}
.detail-gallery-slide {
min-width: 100%;
height: 100%;
background-size: cover;
background-position: center;
position: relative;
}
.detail-gallery-nav {
position: absolute;
top: 50%;
transform: translateY(-50%);
background: rgba(0,0,0,0.5);
color: white;
width: 32px;
height: 32px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
z-index: 10;
}
.detail-gallery-nav.prev { left: 12px; }
.detail-gallery-nav.next { right: 12px; }
.detail-gallery-dots {
display: flex;
justify-content: center;
gap: 8px;
margin-top: 12px;
}
.detail-gallery-dot {
width: 8px;
height: 8px;
border-radius: 50%;
background: #cbd5e1;
cursor: pointer;
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}
.detail-gallery-dot::before {
content: '';
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%) scale(0);
width: 100%;
height: 100%;
background: var(--accent);
border-radius: 50%;
transition: transform 0.3s ease;
}
.detail-gallery-dot.active::before {
transform: translate(-50%, -50%) scale(1.5);
}
/* –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ü—Ä–æ–¥–∞—Ç—å –∂–∏–ª—å—ë" */
.sell-page {
padding: 20px 16px;
max-width: 520px;
margin: 0 auto;
}
.sell-intro {
text-align: center;
margin-bottom: 32px;
padding: 24px;
background: linear-gradient(135deg, rgba(30, 58, 138, 0.05), rgba(212, 175, 55, 0.05));
border-radius: 18px;
border: 1px solid var(--border);
}
.sell-intro h2 {
font-size: 22px;
font-weight: 700;
color: var(--primary);
margin-bottom: 12px;
}
.sell-intro p {
color: var(--text-secondary);
font-size: 15px;
line-height: 1.6;
}
.sell-form {
background: var(--bg);
padding: 24px;
border-radius: 18px;
border: 1px solid var(--border);
box-shadow: var(--shadow-sm);
}
.sell-form h3 {
font-size: 18px;
font-weight: 700;
color: var(--text);
margin-bottom: 20px;
text-align: center;
}
.form-group {
margin-bottom: 18px;
}
.form-label {
display: block;
font-weight: 600;
font-size: 14px;
color: var(--text);
margin-bottom: 8px;
}
.form-input {
width: 100%;
padding: 12px 16px;
border: 1px solid var(--border);
border-radius: 12px;
font-family: 'Inter', sans-serif;
font-size: 15px;
color: var(--text);
background: var(--bg);
transition: all 0.2s ease;
}
.form-input:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
}
.form-input::placeholder {
color: var(--text-secondary);
}
.form-textarea {
width: 100%;
padding: 12px 16px;
border: 1px solid var(--border);
border-radius: 12px;
font-family: 'Inter', sans-serif;
font-size: 15px;
color: var(--text);
background: var(--bg);
resize: vertical;
min-height: 80px;
transition: all 0.2s ease;
}
.form-textarea:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
}
.form-file-upload {
border: 2px dashed var(--border);
border-radius: 12px;
padding: 24px;
text-align: center;
cursor: pointer;
transition: all 0.2s ease;
background: #f8fafc;
}
.form-file-upload:hover {
border-color: var(--primary);
background: rgba(30, 58, 138, 0.03);
}
.form-file-upload svg {
width: 48px;
height: 48px;
margin-bottom: 12px;
stroke: var(--primary);
stroke-width: 2;
fill: none;
}
.form-file-upload p {
color: var(--text-secondary);
font-size: 14px;
margin-bottom: 8px;
}
.form-file-upload small {
color: var(--text-secondary);
font-size: 12px;
display: block;
}
#file-input {
display: none;
}
#photo-preview {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
gap: 12px;
margin-top: 16px;
}
.photo-item {
position: relative;
width: 100%;
height: 100px;
border-radius: 10px;
overflow: hidden;
}
.photo-item img {
width: 100%;
height: 100%;
object-fit: cover;
}
.photo-remove {
position: absolute;
top: 4px;
right: 4px;
width: 20px;
height: 20px;
background: rgba(0, 0, 0, 0.7);
color: white;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
border: none;
font-size: 14px;
}
.form-submit-btn {
width: 100%;
padding: 14px;
font-size: 16px;
font-weight: 600;
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
border: none;
border-radius: 14px;
cursor: pointer;
transition: all 0.2s ease;
box-shadow: var(--shadow-md);
margin-top: 8px;
}
.form-submit-btn:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
}
.form-submit-btn:active {
transform: translateY(0);
box-shadow: 0 2px 8px rgba(30, 58, 138, 0.25);
}
.success-message {
text-align: center;
padding: 40px 20px;
color: var(--text-secondary);
}
.success-message svg {
width: 80px;
height: 80px;
margin: 0 auto 24px;
stroke: var(--primary);
stroke-width: 3;
fill: none;
}
.success-message h3 {
font-size: 20px;
font-weight: 700;
color: var(--text);
margin-bottom: 12px;
}
.success-message p {
font-size: 15px;
line-height: 1.6;
margin-bottom: 24px;
}
.success-message .btn {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
padding: 12px 24px;
font-size: 16px;
border-radius: 14px;
font-weight: 600;
box-shadow: var(--shadow-md);
}
/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ */
.search-box {
position: relative;
margin-bottom: 20px;
}
#catalog-search {
width: 100%;
padding: 14px 16px 14px 50px;
border: 2px solid var(--border);
border-radius: 16px;
font-family: 'Inter', sans-serif;
font-size: 15px;
color: var(--text);
background: var(--bg);
transition: all 0.2s ease;
box-shadow: var(--shadow-sm);
}
#catalog-search:focus {
outline: none;
border-color: var(--primary);
box-shadow: 0 0 0 4px rgba(30, 58, 138, 0.1);
}
#catalog-search::placeholder {
color: var(--text-secondary);
}
.search-box::before {
content: '';
position: absolute;
left: 16px;
top: 50%;
transform: translateY(-50%);
width: 20px;
height: 20px;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2364748B' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
background-size: contain;
background-repeat: no-repeat;
}
/* –§–∏–ª—å—Ç—Ä —Ä–∞–π–æ–Ω–∞ */
.district-filter {
margin-bottom: 20px;
}
#district-dropdown {
background: var(--bg);
border: 1px solid var(--border);
border-radius: 12px;
padding: 16px;
margin-top: 12px;
box-shadow: var(--shadow-md);
}
#district-list {
display: flex;
flex-direction: column;
gap: 12px;
max-height: 200px;
overflow-y: auto;
}
#district-list label {
display: flex;
align-items: center;
gap: 12px;
padding: 10px;
border-radius: 10px;
cursor: pointer;
transition: background 0.2s;
}
#district-list label:hover {
background: #f8fafc;
}
#district-list input[type="checkbox"] {
width: 20px;
height: 20px;
cursor: pointer;
}
/* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –∑–∞—è–≤–æ–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ */
.requests-section {
margin-top: 24px;
}
.request-item {
background: var(--bg);
border: 1px solid var(--border);
border-radius: 14px;
padding: 16px;
margin-bottom: 12px;
cursor: pointer;
transition: all 0.2s ease;
box-shadow: var(--shadow-sm);
}
.request-item:hover {
border-color: var(--primary);
transform: translateY(-2px);
box-shadow: var(--shadow-md);
}
.request-header {
display: flex;
justify-content: space-between;
align-items: start;
margin-bottom: 10px;
}
.request-type {
font-size: 14px;
font-weight: 600;
padding: 4px 10px;
border-radius: 10px;
}
.request-type.buy {
background: rgba(16, 185, 129, 0.15);
color: #059669;
}
.request-type.sell {
background: rgba(239, 68, 68, 0.15);
color: #dc2626;
}
.request-status {
font-size: 13px;
font-weight: 600;
padding: 4px 10px;
border-radius: 10px;
}
.request-status.new {
background: rgba(245, 158, 11, 0.15);
color: #d97706;
}
.request-status.process {
background: rgba(59, 130, 246, 0.15);
color: #2563eb;
}
.request-status.done {
background: rgba(16, 185, 129, 0.15);
color: #059669;
}
.request-body {
margin-bottom: 10px;
}
.request-body p {
font-size: 14px;
color: var(--text-secondary);
margin-bottom: 4px;
}
.request-body p strong {
color: var(--text);
font-weight: 600;
}
.request-footer {
font-size: 12px;
color: var(--text-secondary);
text-align: right;
}
/* –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É" */
.send-to-manager-btn {
width: 100%;
padding: 14px;
font-size: 16px;
font-weight: 600;
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
border: none;
border-radius: 14px;
cursor: pointer;
transition: all 0.2s ease;
box-shadow: var(--shadow-md);
margin-top: 16px;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
}
.send-to-manager-btn:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
}
.send-to-manager-btn:disabled {
background: #94a3b8;
cursor: not-allowed;
transform: none;
box-shadow: var(--shadow-sm);
}
.send-to-manager-btn.hidden {
display: none;
}
.send-to-manager-btn svg {
width: 20px;
height: 20px;
stroke: white;
stroke-width: 2;
fill: none;
}
/* –ö–Ω–æ–ø–∫–∞ "–ù–∞ –∫–∞—Ä—Ç–µ" - –°–ò–ù–ò–ô –¶–í–ï–¢ –ö–ê–ö –£ –û–°–¢–ê–õ–¨–ù–´–• –ö–ù–û–ü–û–ö */
.btn-map {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white;
border: none;
border-radius: 14px;
padding: 10px 18px;
font-family: 'Inter', sans-serif;
font-weight: 600;
font-size: 15px;
cursor: pointer;
transition: all 0.25s ease;
display: inline-flex;
align-items: center;
justify-content: center;
box-shadow: var(--shadow-md);
}
.btn-map:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-lg);
background: linear-gradient(135deg, var(--primary-dark), #0f172a);
}
.btn-map:active {
transform: translateY(0);
box-shadow: 0 2px 8px rgba(30, 58, 138, 0.25);
}
.btn-map svg {
margin-right: 6px;
width: 18px;
height: 18px;
stroke: white;
stroke-width: 2;
fill: none;
}
/* –ú–æ–±–∏–ª—å–Ω—ã–µ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ */
@media (max-width: 480px) {
body {
padding: 16px 12px 80px;
}
.bottom-nav {
padding: 10px 8px 18px;
gap: 0;
}
.nav-btn {
padding: 6px 3px;
font-size: 10px;
}
.nav-icon {
width: 22px;
height: 22px;
}
.nav-btn-add {
width: 56px;
height: 56px;
}
}
</style>
</head>
<body>
<!-- SPLASH -->
<div id="splash">
<img src="https://i.ibb.co/xKZ1hC1j/Dt-L73-Ny-XFi8-Gj0c-Np5-Zr-ZQni2c-QXIXMubb9j-U-kj-Io-Z9q-Nj-ukw-RQ3f4-Bb-Bp-CWLox-B4pm-Fso-Gh-Hz-Go-Xqb.jpg" class="splash-logo" alt="–õ–æ–≥–æ—Ç–∏–ø">
<div class="splash-text">–£–∂–µ —Å—Ç—Ä–æ–∏–º <span class="hammer-anim">üî®</span></div>
</div>
<!-- –ì–õ–ê–í–ù–ê–Ø -->
<div id="home" class="page">
<button class="find-home-btn" onclick="show('sell-property')">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
<polyline points="9 22 9 12 15 12 15 22"/>
</svg>
–ö—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å
</button>
<div class="banner">
<div class="banner-container" id="banner-container">
<div class="banner-slides" id="bannerSlides"></div>
</div>
<div class="banner-dots" id="bannerDots"></div>
<div class="banner-text">
üî• –¢–æ–ª—å–∫–æ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ–π ‚Äî –æ—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è!
</div>
</div>
<div class="section-header">
<div class="section-title">
<img src="https://img.icons8.com/?size=100&id=87204&format=png&color=000000" class="section-icon" alt="Hot Offers">
Hot offers
</div>
<button class="view-all-btn" onclick="show('catalog')">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å—ë</button>
</div>
<div class="offers-grid" id="hotOffers"></div>
<div class="section-header">
<div class="section-title">
<img src="https://img.icons8.com/?size=100&id=103317&format=png&color=000000" class="section-icon" alt="–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂">
–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂
</div>
<button class="view-all-btn" onclick="show('catalog')">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å—ë</button>
</div>
<div class="offers-grid" id="hitOffers"></div>
</div>
<!-- –ö–ê–¢–ê–õ–û–ì -->
<div id="catalog" class="page">
<button id="catalog-back-btn" class="btn-back" style="margin-bottom:16px;display:none;" onclick="catalogGoBack()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M15 18l-6-6 6-6"/>
</svg>
</button>
<div class="search-box" id="catalog-search-box" style="display:none;">
<input type="text" id="catalog-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º..." oninput="filterCatalog()">
</div>
<div class="district-filter" id="district-filter" style="display:none;">
<button class="btn" style="width:100%; padding:10px; font-size:14px;" onclick="toggleDistrictDropdown()">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M3 10c0 4.42 3.58 8 8 8 4.42 0 8-3.58 8-8 0-4.42-3.58-8-8-8-4.42 0-8 3.58-8 8z"/>
<path d="M12 14v-4"/>
<path d="M12 6v2"/>
<path d="M12 16v2"/>
</svg>
–í—ã–±—Ä–∞—Ç—å —Ä–∞–π–æ–Ω
</button>
<div id="district-dropdown" style="display:none;">
<div id="district-list"></div>
<button class="view-all-btn" style="width:100%; margin-top:12px;" onclick="applyDistrictFilter()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
</div>
</div>
<div id="step-market" style="display:block;">
<div class="category-card" onclick="selectMarket('all')">
<svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<rect x="3" y="3" width="7" height="7" rx="1"/>
<rect x="14" y="3" width="7" height="7" rx="1"/>
<rect x="3" y="14" width="7" height="7" rx="1"/>
<rect x="14" y="14" width="7" height="7" rx="1"/>
</svg>
–í—Å–µ –æ–±—ä–µ–∫—Ç—ã
</div>
<div class="category-card" onclick="selectMarket('primary')">
<img src="https://img.icons8.com/?size=100&id=85053&format=png&color=000000" class="category-icon" alt="–ù–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã">
–ù–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
</div>
<div class="category-card" onclick="selectMarket('secondary')">
<img src="https://img.icons8.com/?size=100&id=98310&format=png&color=000000" class="category-icon" alt="–í—Ç–æ—Ä–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã">
–í—Ç–æ—Ä–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
</div>
<div class="category-card" onclick="selectMarket('thailand')">
<img src="https://img.icons8.com/?size=100&id=113294&format=png&color=000000" class="category-icon" alt="–¢–∞–∏–ª–∞–Ω–¥">
–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –≤ –¢–∞–∏–ª–∞–Ω–¥–µ
</div>
</div>
<div id="step-type" style="display:none;"></div>
<div id="step-jk" style="display:none;"></div>
<div id="catalog-results" class="offers-grid" style="display:none;"></div>
</div>
<!-- –°–¢–†–ê–ù–ò–¶–ê –¢–ê–ò–õ–ê–ù–î–ê -->
<div id="thailand" class="page">
<button class="btn-back" onclick="show('catalog')">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M15 18l-6-6 6-6"/>
</svg>
</button>
<div class="thailand-page">
<h1 class="thailand-title">üå¥ –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –≤ –¢–∞–∏–ª–∞–Ω–¥–µ</h1>
<p class="thailand-subtitle">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ —Ç—Ä–æ–ø–∏—á–µ—Å–∫–æ–º —Ä–∞—é</p>
</div>
<!-- 5 –ë–ê–ù–ù–ï–†–û–í –í–ï–†–¢–ò–ö–ê–õ–¨–ù–û -->
<div class="thailand-banner-grid" id="thailand-banners"></div>
<!-- 5 –û–ë–™–Ø–í–õ–ï–ù–ò–ô -->
<div class="thailand-offers-section">
<div class="section-header">
<div class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</div>
</div>
<div class="offers-grid" id="thailand-offers"></div>
</div>
</div>
<!-- –ò–ó–ë–†–ê–ù–ù–û–ï -->
<div id="favorites" class="page">
<button class="btn-back" onclick="show('home')">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M15 18l-6-6 6-6"/>
</svg>
</button>
<div id="fav-list"></div>
</div>
<!-- –ö–û–†–ó–ò–ù–ê -->
<div id="cart" class="page">
<button class="btn-back" onclick="show('home')">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M15 18l-6-6 6-6"/>
</svg>
</button>
<div id="cart-items"></div>
<button id="send-to-manager" class="send-to-manager-btn hidden" onclick="showPhoneModal()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
<polyline points="22 6 12 13 2 6"/>
</svg>
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É
</button>
</div>
<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="page">
<div class="card" style="text-align: center; padding: 28px;">
<img id="user-photo" src="https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png"
alt="–ê–≤–∞—Ç–∞—Ä" style="width: 92px; height: 92px; border-radius: 50%; margin-bottom: 20px; border: 2px solid var(--border);">
<div id="user-info">–£–∂–µ —Å—Ç—Ä–æ–∏–º...</div>
</div>
<div class="card">
<h3 style="font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M22 16.92v-3.28a2 2 0 00-2-2H4a2 2 0 00-2 2v3.28a2 2 0 002 2h16a2 2 0 002-2zM8 10a2 2 0 100-4 2 2 0 000 4zm8 0a2 2 0 100-4 2 2 0 000 4z"/>
</svg>
–ü–æ–¥–¥–µ—Ä–∂–∫–∞
</h3>
<div class="support-option" onclick="window.open('https://t.me/novikela', '_blank')">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
</svg>
–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
</div>
<div class="support-option" onclick="window.location.href='tel:89376956362'">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M15.05 5A5 5 0 0119 8.95M15.05 1A9 9 0 0123 8.94m-2.05 8a9 9 0 01-18 0m18 0a9 9 0 00-18 0"/>
</svg>
–ü–æ–∑–≤–æ–Ω–∏—Ç—å
</div>
</div>
<!-- –†–ê–ó–î–ï–õ –ó–ê–Ø–í–û–ö -->
<div class="card requests-section">
<h3 style="font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
</svg>
–ú–æ–∏ –∑–∞—è–≤–∫–∏
</h3>
<div id="my-requests"></div>
<button id="view-all-requests-btn" class="view-all-requests-btn" onclick="viewAllRequests()" style="display:none;">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏</button>
</div>
<!-- –†–ê–ó–î–ï–õ –ò–°–¢–û–†–ò–ò –ó–ê–ö–ê–ó–û–í -->
<div class="card requests-section">
<h3 style="font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M3 3h18v18H3V3z"/>
<path d="M16 8h2M16 12h2M16 16h2M8 8h6M8 12h6M8 16h6"/>
</svg>
–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
</h3>
<div id="orders-history"></div>
<button id="view-all-orders-btn" class="view-all-requests-btn" onclick="viewAllOrders()" style="display:none;">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã</button>
</div>
</div>
<!-- –î–ï–¢–ê–õ–¨–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê - –§–û–¢–û –¢–û–õ–¨–ö–û –ó–î–ï–°–¨ -->
<div id="property-detail" class="page">
<button class="btn-back" id="detail-back-btn" onclick="detailGoBack()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M15 18l-6-6 6-6"/>
</svg>
</button>
<div class="card">
<div class="detail-gallery-container" id="detail-gallery-container" onclick="openImageModal()">
<div class="detail-gallery-slides" id="detailGallerySlides"></div>
<div class="detail-gallery-nav prev" onclick="event.stopPropagation(); changeDetailImage(-1)">‚Äπ</div>
<div class="detail-gallery-nav next" onclick="event.stopPropagation(); changeDetailImage(1)">‚Ä∫</div>
</div>
<div class="detail-gallery-dots" id="detailGalleryDots"></div>
<h1 id="detail-title" class="property-title"></h1>
<div id="detail-address" class="property-address"></div>
<div id="detail-price" class="property-price"></div>
<div id="detail-description" class="property-description"></div>
<div class="property-actions">
<button id="detail-fav-btn" class="btn" onclick="toggleFavoriteDetail()"></button>
<button class="btn" onclick="toggleCart(currentDetailId)">
<span id="detail-cart-text">
<img src="https://img.icons8.com/?size=100&id=85080&format=png&color=000000" style="width:16px;height:16px;vertical-align:middle;margin-right:6px;filter:brightness(0) invert(1);" alt="–ö–æ—Ä–∑–∏–Ω–∞">
–í –∫–æ—Ä–∑–∏–Ω—É
</span>
</button>
<button id="detail-map-btn" class="btn-map" onclick="viewOnMap()">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
<circle cx="12" cy="10" r="3"/>
</svg>
–ù–∞ –∫–∞—Ä—Ç–µ
</button>
</div>
</div>
</div>
<!-- –°–¢–†–ê–ù–ò–¶–ê "–ü–†–û–î–ê–¢–¨ –ñ–ò–õ–¨–Å" -->
<div id="sell-property" class="page">
<button class="btn-back" id="sell-back-btn" onclick="sellGoBack()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M15 18l-6-6 6-6"/>
</svg>
</button>
<div class="sell-page">
<div class="sell-intro" id="sell-intro">
<h2>–ú—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º –∫—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å!</h2>
<p>–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é, –∏ –Ω–∞—à —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ–¥–±–µ—Ä–µ—Ç –¥–ª—è –≤–∞—Å –ª—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã</p>
<div style="display: flex; gap: 12px; margin-top: 20px;">
<button class="btn" onclick="setDealType('buy')" style="flex: 1; background: linear-gradient(135deg, #10b981, #059669); color: white;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
<path d="M12 20h9"/>
<path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/>
</svg>
–ö—É–ø–∏—Ç—å
</button>
<button class="btn" onclick="setDealType('sell')" style="flex: 1; background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
<path d="M12 20h9"/>
<path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/>
</svg>
–ü—Ä–æ–¥–∞—Ç—å
</button>
</div>
</div>
<div class="sell-form" id="sell-form-container" style="display: none;">
<input type="hidden" id="deal-type" value="">
<h3 id="form-title">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</h3>
<div class="form-group">
<label class="form-label" for="sell-name">–í–∞—à–µ –∏–º—è *</label>
<input type="text" id="sell-name" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
</div>
<div class="form-group">
<label class="form-label" for="sell-phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ *</label>
<input type="tel" id="sell-phone" class="form-input" placeholder="+7 (999) 123-45-67" required>
</div>
<div class="form-group">
<label class="form-label" for="sell-address">–ê–¥—Ä–µ—Å –∏–ª–∏ —Ä–∞–π–æ–Ω *</label>
<textarea id="sell-address" class="form-textarea" placeholder="–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π —Ä–∞–π–æ–Ω" required></textarea>
</div>
<div class="form-group">
<label class="form-label" for="sell-description">–û–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π *</label>
<textarea id="sell-description" class="form-textarea" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤–∞—à–∏—Ö –ø–æ–∂–µ–ª–∞–Ω–∏—è—Ö –∏–ª–∏ –æ–±—ä–µ–∫—Ç–µ..." required></textarea>
</div>
<div class="form-group">
<label class="form-label">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ–±—ä–µ–∫—Ç–∞</label>
<div class="form-file-upload" onclick="document.getElementById('file-input').click()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5 5-5-5M12 3v12"/>
</svg>
<p>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</p>
<small>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è JPG, PNG. –ú–∞–∫—Å–∏–º—É–º 5 —Ñ–æ—Ç–æ</small>
</div>
<input type="file" id="file-input" accept="image/*" multiple onchange="handleFileSelect(event)">
<div id="photo-preview"></div>
</div>
<button class="form-submit-btn" onclick="submitSellForm()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
</div>
<div id="sell-success" class="success-message" style="display:none;">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
<path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
<polyline points="22 4 12 14.01 9 11.01" />
</svg>
<h3>–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</h3>
<p>–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ! –ù–∞—à —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.</p>
<button class="btn" onclick="resetSellForm()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω—É –∑–∞—è–≤–∫—É</button>
</div>
</div>
</div>
<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –§–û–¢–û - –¢–û–õ–¨–ö–û –í –î–ï–¢–ê–õ–¨–ù–û–ô –°–¢–†–ê–ù–ò–¶–ï -->
<div id="photo-modal" class="modal" onclick="closeImageModal(event)">
<div class="modal-content">
<button class="modal-close" onclick="closeImageModal(event)">&times;</button>
<img id="modal-img" class="modal-img" src="" alt="–§–æ—Ç–æ">
<button class="modal-nav prev" onclick="changeModalImage(-1)">‚Äπ</button>
<button class="modal-nav next" onclick="changeModalImage(1)">‚Ä∫</button>
<div class="modal-counter" id="modal-counter">1/1</div>
</div>
</div>
<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –¢–ï–õ–ï–§–û–ù–ê -->
<div id="phone-modal" class="phone-modal">
<div class="phone-modal-content">
<h3 class="phone-modal-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω</h3>
<p class="phone-modal-text">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —á—Ç–æ–±—ã –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–≥ —Å –≤–∞–º–∏ —Å–≤—è–∑–∞—Ç—å—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.</p>
<input type="tel" id="phone-input" class="phone-input" placeholder="+7 (999) 123-45-67" maxlength="18">
<div class="phone-modal-buttons">
<button class="phone-modal-btn cancel" onclick="closePhoneModal()">–û—Ç–º–µ–Ω–∞</button>
<button class="phone-modal-btn submit" onclick="confirmOrder()" id="confirm-order-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>
</div>
</div>
<!-- –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
<div class="bottom-nav">
<button class="nav-btn" onclick="show('home')">
<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
<path d="M3 9l9-7 9 7v11a2 2 0 00-2 2H5a2 2 0 00-2-2z"/>
<polyline points="9 22 9 12 15 12 15 22"/>
</svg>
<span>–ì–ª–∞–≤–Ω–∞—è</span>
</button>
<button class="nav-btn" onclick="show('catalog')">
<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
<rect x="3" y="3" width="7" height="7" rx="1"/>
<rect x="14" y="3" width="7" height="7" rx="1"/>
<rect x="3" y="14" width="7" height="7" rx="1"/>
<rect x="14" y="14" width="7" height="7" rx="1"/>
</svg>
<span>–ö–∞—Ç–∞–ª–æ–≥</span>
</button>
<div style="flex: 1; display: flex; justify-content: center;">
<button class="nav-btn-add" onclick="show('sell-property')">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
<line x1="12" y1="5" x2="12" y2="19" />
<line x1="5" y1="12" x2="19" y2="12" />
</svg>
</button>
</div>
<button class="nav-btn" onclick="show('favorites')">
<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
<path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
</svg>
<span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
</button>
<button class="nav-btn" onclick="show('profile')">
<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
<path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
<circle cx="12" cy="7" r="4"/>
</svg>
<span>–ü—Ä–æ—Ñ–∏–ª—å</span>
</button>
</div>
<div id="floating-cart" onclick="show('cart')">
<img src="https://img.icons8.com/?size=100&id=85080&format=png&color=000000" alt="–ö–æ—Ä–∑–∏–Ω–∞">
<div id="cart-badge">0</div>
</div>
<script>
// === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===
const API_BASE =  'https://guarantrealt.ru/api';
// === –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
let favorites = JSON.parse(localStorage.getItem('fav') || '[]');
let cart = JSON.parse(localStorage.getItem('cart') || '[]');
let currentSlide = 0;
let slideInterval;
let currentDetailId = null;
let currentDetailAddress = null;
let detailCurrentImage = 0;
let selectedMarket = null;
let selectedType = null;
let selectedJK = null;
let catalogStep = 'market';
let selectedDistricts = JSON.parse(localStorage.getItem('selectedDistricts') || '[]');
let isSwiping = false;
let detailGalleryTouchStartX = 0;
let selectedPhotos = [];
let modalCurrentImage = 0;
let modalImages = [];
let ALL_ADS = [];
let customerPhone = '';
let currentFromPage = 'home';
let USER_TG_ID = null;
let showAllRequests = false;
let showAllOrders = false;
// === –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –° –°–ï–†–í–ï–†–ê ===
async function loadProperties() {
try {
const response = await fetch(`${API_BASE}/properties`);
ALL_ADS = await response.json();
renderHomePreviews();
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø–æ—Å–µ—â–µ–Ω–∏–µ
trackVisit();
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:', error);
alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
}
}
async function trackVisit() {
try {
await fetch(`${API_BASE}/track-visit`, { method: 'POST' });
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å–µ—â–µ–Ω–∏—è:', error);
}
}
async function loadHotProperties() {
try {
const response = await fetch(`${API_BASE}/properties/hot`);
return await response.json();
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ—Ä—è—á–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π:', error);
return [];
}
}
async function loadHitProperties() {
try {
const response = await fetch(`${API_BASE}/properties/hit`);
return await response.json();
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ö–∏—Ç–æ–≤ –ø—Ä–æ–¥–∞–∂:', error);
return [];
}
}
async function loadBanners() {
try {
const response = await fetch(`${API_BASE}/banners/home`);
const banners = await response.json();
const bannerImages = banners.map(b => b.image);
initBannerSlider(bannerImages);
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–Ω–Ω–µ—Ä–æ–≤:', error);
}
}
async function loadThailandProperties() {
try {
const response = await fetch(`${API_BASE}/thailand`);
return await response.json();
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¢–∞–∏–ª–∞–Ω–¥ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:', error);
return [];
}
}
async function loadThailandBanners() {
try {
const response = await fetch(`${API_BASE}/banners/thailand`);
const banners = await response.json();
const container = document.getElementById('thailand-banners');
container.innerHTML = banners.map(banner => `
<div class="thailand-banner-card" onclick="viewThailandProperty(${banner.target_property_id})">
<img src="${banner.image}" alt="${banner.title || '–ë–∞–Ω–Ω–µ—Ä'}">
<div class="banner-title">${banner.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</div>
</div>
`).join('');
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–Ω–Ω–µ—Ä–æ–≤ –¢–∞–∏–ª–∞–Ω–¥–∞:', error);
}
}
// === –§–£–ù–ö–¶–ò–ò –†–ï–ù–î–ï–†–ò–ù–ì–ê ===
function renderCards(container, items) {
container.innerHTML = items.map(ad => `
<div class="card-item">
<div class="card-item__content">
<label class="favorite-btn" onclick="event.stopPropagation();">
<input type="checkbox" ${favorites.includes(ad.id) ? 'checked' : ''} onchange="toggleFavorite(${ad.id})">
<svg viewBox="0 0 24 24">
<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
</svg>
</label>
<div class="card-item__image-container" data-id="${ad.id}">
${ad.images.map((img, i) =>
`<div class="card-item__image-slide" style="background-image: url('${img}'); ${i === 0 ? 'display:block;' : ''}"></div>`
).join('')}
</div>
<div class="card-item__text">
<p class="card-item__district">${ad.district || ad.address.split(',')[0].trim()}</p>
<p class="card-item__title">${ad.title}</p>
<p class="card-item__description">${ad.description}</p>
</div>
<div class="card-item__footer">
<div class="card-item__price">${ad.price}</div>
<div class="card-item__button" onclick="event.stopPropagation(); toggleCart(${ad.id})">
${cart.includes(ad.id) ? `
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
<path d="M18 6L6 18M6 6l12 12"/>
</svg>
` : `
<img src="https://img.icons8.com/?size=100&id=85080&format=png&color=000000" style="width:14px;height:14px;filter:brightness(0) invert(1);" alt="–ö–æ—Ä–∑–∏–Ω–∞">
`}
</div>
</div>
</div>
</div>
`).join('');
// –£–±—Ä–∞–ª–∏ —Å–≤–∞–π–ø –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö - —Ñ–æ—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
}
async function renderHomePreviews() {
const hotEl = document.getElementById('hotOffers');
const hitEl = document.getElementById('hitOffers');
const hotAds = await loadHotProperties();
const hitAds = await loadHitProperties();
renderCards(hotEl, hotAds);
renderCards(hitEl, hitAds);
}
function renderFavorites() {
const list = document.getElementById('fav-list');
const items = favorites.map(id => ALL_ADS.find(ad => ad.id === id)).filter(Boolean);
if (items.length === 0) {
list.innerHTML = `
<div class="empty-favorites">
<svg viewBox="0 0 24 24">
<path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
</svg>
<h3>–ù–µ—Ç –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è –æ–±—ä–µ–∫—Ç–æ–≤</h3>
<p>–î–æ–±–∞–≤—å—Ç–µ –æ–±—ä–µ–∫—Ç—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –∫ –Ω–∏–º –≤–µ—Ä–Ω—É—Ç—å—Å—è</p>
</div>
`;
} else {
renderCards(list, items);
}
}
function renderCart() {
const container = document.getElementById('cart-items');
const sendButton = document.getElementById('send-to-manager');
if (cart.length === 0) {
container.innerHTML = `
<div class="empty-cart">
<div class="cart-icon">
<img src="https://img.icons8.com/?size=100&id=85080&format=png&color=000000" alt="–ö–æ—Ä–∑–∏–Ω–∞">
</div>
<h3>–ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ</h3>
<p>–î–æ–±–∞–≤—å—Ç–µ –æ–±—ä–µ–∫—Ç—ã –≤ –∫–æ—Ä–∑–∏–Ω—É, —á—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</p>
<button class="btn" onclick="show('catalog')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
</div>
`;
sendButton.classList.add('hidden');
} else {
const items = cart.map(id => ALL_ADS.find(ad => ad.id === id)).filter(Boolean);
container.innerHTML = items.map(item => `
<div class="card-item">
<div class="card-item__content">
<div class="card-item__image-container" data-id="${item.id}">
${item.images.map((img, i) =>
`<div class="card-item__image-slide" style="background-image: url('${img}'); ${i === 0 ? 'display:block;' : ''}"></div>`
).join('')}
</div>
<div class="card-item__text">
<p class="card-item__district">${item.district || item.address.split(',')[0].trim()}</p>
<p class="card-item__title">${item.title}</p>
<p class="card-item__description">${item.price}</p>
</div>
<div class="card-item__footer">
<div class="card-item__price">${item.price}</div>
<div class="card-item__button" onclick="event.stopPropagation(); toggleCart(${item.id})">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
<path d="M18 6L6 18M6 6l12 12"/>
</svg>
</div>
</div>
</div>
</div>
`).join('');
sendButton.classList.remove('hidden');
sendButton.disabled = false;
}
}
async function renderThailandOffers() {
const container = document.getElementById('thailand-offers');
const thailandAds = await loadThailandProperties();
renderCards(container, thailandAds);
}
function initBannerSlider(images) {
const slidesContainer = document.getElementById('bannerSlides');
const dotsContainer = document.getElementById('bannerDots');
slidesContainer.innerHTML = images.map((src, index) => `
<div class="banner-slide">
<img src="${src}" alt="–ë–∞–Ω–Ω–µ—Ä ${index + 1}" loading="lazy" decoding="async" onerror="this.parentElement.style.backgroundColor='#f1f5f9'; this.style.display='none';">
</div>
`).join('');
dotsContainer.innerHTML = images.map((_, i) => `<div class="banner-dot" data-index="${i}"></div>`).join('');
updateBanner(images);
dotsContainer.querySelectorAll('.banner-dot').forEach(dot => {
dot.addEventListener('click', () => {
currentSlide = parseInt(dot.getAttribute('data-index'));
updateBanner(images);
resetInterval();
});
});
const bannerContainer = document.getElementById('banner-container');
detectSwipe(bannerContainer, () => {
nextSlide(images);
}, () => {
currentSlide = (currentSlide - 1 + images.length) % images.length;
updateBanner(images);
resetInterval();
});
startAutoSlide(images);
}
function updateBanner(images) {
const slidesContainer = document.getElementById('bannerSlides');
const dots = document.querySelectorAll('.banner-dot');
slidesContainer.style.transform = `translateX(${-currentSlide * 50}%)`;
dots.forEach((dot, i) => dot.classList.toggle('active', i === currentSlide));
}
function nextSlide(images) {
currentSlide = (currentSlide + 1) % images.length;
updateBanner(images);
}
function startAutoSlide(images) {
clearInterval(slideInterval);
slideInterval = setInterval(() => nextSlide(images), 3500);
}
function resetInterval() {
clearInterval(slideInterval);
startAutoSlide();
}
// === –§–£–ù–ö–¶–ò–ò –ù–ê–í–ò–ì–ê–¶–ò–ò ===
function show(pageId) {
document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
document.getElementById(pageId).classList.add('active');
document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
const buttons = document.querySelectorAll('.nav-btn');
for (let btn of buttons) {
if (btn.getAttribute('onclick')?.includes(`show('${pageId}')`)) {
btn.classList.add('active');
break;
}
}
if (pageId === 'catalog') {
goToMarketStep();
}
if (pageId === 'thailand') {
renderThailandOffers();
loadThailandBanners();
}
if (pageId === 'favorites') renderFavorites();
if (pageId === 'cart') renderCart();
if (pageId === 'profile') {
initTelegram();
renderMyRequests();
renderOrdersHistory();
}
if (pageId === 'sell-property') {
resetSellForm();
}
}
function viewProperty(id) {
const ad = ALL_ADS.find(a => a.id === id);
if (!ad) return;
currentDetailId = id;
currentDetailAddress = ad.address;
detailCurrentImage = 0;
const slidesContainer = document.getElementById('detailGallerySlides');
const dotsContainer = document.getElementById('detailGalleryDots');
slidesContainer.innerHTML = ad.images.map(img =>
`<div class="detail-gallery-slide" style="background-image: url('${img}');"></div>`
).join('');
dotsContainer.innerHTML = ad.images.map((_, i) =>
`<div class="detail-gallery-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></div>`
).join('');
updateDetailGallery(ad);
document.getElementById('detail-title').textContent = ad.title;
const district = ad.district || ad.address.split(',')[0].trim();
document.getElementById('detail-address').innerHTML = `<strong>${district}</strong><br>${ad.address}`;
document.getElementById('detail-price').textContent = ad.price;
document.getElementById('detail-description').textContent = ad.description;
const inCart = cart.includes(id);
const isFav = favorites.includes(id);
document.getElementById('detail-cart-text').innerHTML = inCart ? `
<svg width="16" height="16" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M18 6L6 18M6 6l12 12"/>
</svg>
–£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
` : `
<img src="https://img.icons8.com/?size=100&id=85080&format=png&color=000000" style="width:16px;height:16px;vertical-align:middle;margin-right:6px;filter:brightness(0) invert(1);" alt="–ö–æ—Ä–∑–∏–Ω–∞">
–í –∫–æ—Ä–∑–∏–Ω—É
`;
document.getElementById('detail-fav-btn').innerHTML = isFav ? `
<svg width="16" height="16" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="currentColor" stroke="none">
<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
</svg>
–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º
` : `
<svg width="16" height="16" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
</svg>
–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
`;
// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç–æ—á–µ–∫ –≥–∞–ª–µ—Ä–µ–∏
dotsContainer.querySelectorAll('.detail-gallery-dot').forEach(dot => {
dot.addEventListener('click', () => {
const index = parseInt(dot.getAttribute('data-index'));
setDetailImage(index);
});
});
// –°–≤–∞–π–ø –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const galleryContainer = document.getElementById('detail-gallery-container');
galleryContainer.addEventListener('touchstart', (e) => {
detailGalleryTouchStartX = e.touches[0].clientX;
}, { passive: true });
galleryContainer.addEventListener('touchmove', (e) => {
const touchEnd = e.touches[0].clientX;
const diff = detailGalleryTouchStartX - touchEnd;
if (Math.abs(diff) > 30) {
if (diff > 0) {
changeDetailImage(1);
} else {
changeDetailImage(-1);
}
}
}, { passive: false });
galleryContainer.addEventListener('touchend', () => {
detailGalleryTouchStartX = 0;
});
show('property-detail');
}
function viewThailandProperty(id) {
currentFromPage = 'thailand';
viewProperty(id);
}
function detailGoBack() {
if (currentFromPage === 'thailand') {
show('thailand');
} else if (currentFromPage === 'catalog') {
show('catalog');
} else {
show('home');
}
}
function catalogGoBack() {
if (catalogStep === 'results') {
if (selectedJK) {
selectedJK = null;
catalogStep = 'jk';
document.getElementById('step-jk').style.display = 'block';
document.getElementById('catalog-results').style.display = 'none';
hideSearch();
} else if (selectedType) {
selectedType = null;
catalogStep = 'type';
document.getElementById('step-type').style.display = 'block';
document.getElementById('step-jk').style.display = 'none';
document.getElementById('catalog-results').style.display = 'none';
hideSearch();
} else {
goToMarketStep();
}
} else if (catalogStep === 'jk') {
selectedJK = null;
catalogStep = 'type';
document.getElementById('step-type').style.display = 'block';
document.getElementById('step-jk').style.display = 'none';
hideSearch();
} else if (catalogStep === 'type') {
selectedType = null;
goToMarketStep();
}
}
function goToMarketStep() {
selectedMarket = null;
selectedType = null;
selectedJK = null;
catalogStep = 'market';
document.getElementById('step-market').style.display = 'block';
document.getElementById('step-type').style.display = 'none';
document.getElementById('step-jk').style.display = 'none';
document.getElementById('catalog-results').style.display = 'none';
document.getElementById('catalog-back-btn').style.display = 'none';
hideSearch();
}
function selectMarket(market) {
selectedMarket = market;
selectedType = null;
selectedJK = null;
document.getElementById('step-market').style.display = 'none';
document.getElementById('step-type').innerHTML = '';
document.getElementById('step-type').style.display = 'none';
document.getElementById('step-jk').innerHTML = '';
document.getElementById('step-jk').style.display = 'none';
document.getElementById('catalog-results').style.display = 'none';
document.getElementById('catalog-back-btn').style.display = 'inline-flex';
if (market === 'thailand') {
show('thailand');
} else if (market === 'all') {
catalogStep = 'results';
showSearch();
filterCatalog();
} else {
catalogStep = 'type';
document.getElementById('step-type').innerHTML = `
<div class="category-card" onclick="selectType('apartment')">
<img src="https://img.icons8.com/?size=100&id=110119&format=png&color=000000" class="category-icon" alt="–ö–≤–∞—Ä—Ç–∏—Ä—ã">
–ö–≤–∞—Ä—Ç–∏—Ä—ã
</div>
<div class="category-card" onclick="selectType('house')">
<svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
<polyline points="9 22 9 12 15 12 15 22"/>
</svg>
–î–æ–º–∞
</div>
`;
document.getElementById('step-type').style.display = 'block';
hideSearch();
}
}
function selectType(type) {
selectedType = type;
selectedJK = null;
catalogStep = 'type';
document.getElementById('step-type').style.display = 'none';
document.getElementById('step-jk').innerHTML = '';
document.getElementById('step-jk').style.display = 'none';
document.getElementById('catalog-results').style.display = 'none';
// –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã (–ø–µ—Ä–≤–∏—á–∫–∞), –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ñ–ö
if (selectedMarket === 'primary') {
// –ü–æ–ª—É—á–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ñ–ö –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞ –∏ —Ç–∏–ø–∞
const jks = [...new Set(ALL_ADS
.filter(a => a.market === 'primary' && a.type === type && a.jk)
.map(a => a.jk)
)].filter(Boolean).sort();
if (jks.length > 0) {
// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —à–∞–≥ –≤—ã–±–æ—Ä–∞ –ñ–ö
catalogStep = 'jk';
document.getElementById('step-jk').innerHTML = jks.map(jk => `
<div class="category-card" onclick="selectJK('${jk}')">
${jk}
</div>
`).join('');
document.getElementById('step-jk').style.display = 'block';
hideSearch();
return;
}
}
// –ï—Å–ª–∏ –ñ–ö –Ω–µ—Ç –∏–ª–∏ –Ω–µ –ø–µ—Ä–≤–∏—á–∫–∞, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
catalogStep = 'results';
showSearch();
filterCatalog();
}
function selectJK(jk) {
selectedJK = jk;
catalogStep = 'results';
showSearch();
filterCatalog();
}
function hideSearch() {
document.getElementById('catalog-search-box').classList.remove('active');
document.getElementById('catalog-search').value = '';
document.getElementById('district-filter').style.display = 'none';
}
function showSearch() {
if (catalogStep === 'results') {
document.getElementById('catalog-search-box').style.display = 'block';
document.getElementById('district-filter').style.display = 'block';
loadDistricts();
} else {
document.getElementById('catalog-search-box').style.display = 'none';
document.getElementById('district-filter').style.display = 'none';
}
}
function loadDistricts() {
let filtered = ALL_ADS;
if (selectedMarket === 'primary' || selectedMarket === 'secondary') {
filtered = filtered.filter(a => a.market === selectedMarket);
}
if (selectedType) filtered = filtered.filter(a => a.type === selectedType);
if (selectedJK) filtered = filtered.filter(a => a.jk === selectedJK);
const districts = [...new Set(filtered.map(ad => ad.district || ad.address.split(',')[0].trim()))].sort();
const list = document.getElementById('district-list');
list.innerHTML = districts.map(district => `
<label>
<input type="checkbox" value="${district}" ${selectedDistricts.includes(district) ? 'checked' : ''}>
<span>${district}</span>
</label>
`).join('');
}
function toggleDistrictDropdown() {
const dropdown = document.getElementById('district-dropdown');
dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
}
function applyDistrictFilter() {
selectedDistricts = [];
document.querySelectorAll('#district-list input[type="checkbox"]:checked').forEach(cb => {
selectedDistricts.push(cb.value);
});
localStorage.setItem('selectedDistricts', JSON.stringify(selectedDistricts));
toggleDistrictDropdown();
filterCatalog();
}
function filterCatalog() {
let query = (document.getElementById('catalog-search')?.value || '').trim().toLowerCase();
let filtered = ALL_ADS;
if (selectedMarket === 'primary' || selectedMarket === 'secondary') {
filtered = filtered.filter(a => a.market === selectedMarket);
}
if (selectedType) filtered = filtered.filter(a => a.type === selectedType);
if (selectedJK) filtered = filtered.filter(a => a.jk === selectedJK);
if (selectedDistricts.length > 0) {
filtered = filtered.filter(a => selectedDistricts.includes(a.district || a.address.split(',')[0].trim()));
}
if (query) {
filtered = filtered.filter(a =>
a.title.toLowerCase().includes(query) ||
a.address.toLowerCase().includes(query) ||
(a.jk && a.jk.toLowerCase().includes(query)) ||
a.description.toLowerCase().includes(query) ||
(a.property_number && a.property_number.toLowerCase().includes(query))
);
}
renderCatalogResults(filtered);
}
function renderCatalogResults(items) {
document.getElementById('step-market').style.display = 'none';
document.getElementById('step-type').style.display = 'none';
document.getElementById('step-jk').style.display = 'none';
const container = document.getElementById('catalog-results');
container.style.display = 'grid';
if (items.length === 0) {
container.innerHTML = '<div class="empty-state">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
} else {
renderCards(container, items);
}
}
// === –§–£–ù–ö–¶–ò–ò –ö–û–†–ó–ò–ù–´ –ò –ò–ó–ë–†–ê–ù–ù–û–ì–û ===
function updateCartUI() {
const count = cart.length;
document.getElementById('cart-badge').textContent = count;
document.getElementById('floating-cart').classList.toggle('visible', count > 0);
}
function toggleCart(id) {
const index = cart.indexOf(id);
if (index === -1) cart.push(id);
else cart.splice(index, 1);
localStorage.setItem('cart', JSON.stringify(cart));
updateCartUI();
renderHomePreviews();
renderFavorites();
renderCart();
if (currentDetailId === id) {
const inCart = cart.includes(id);
document.getElementById('detail-cart-text').innerHTML = inCart ? `
<svg width="16" height="16" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M18 6L6 18M6 6l12 12"/>
</svg>
–£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
` : `
<img src="https://img.icons8.com/?size=100&id=85080&format=png&color=000000" style="width:16px;height:16px;vertical-align:middle;margin-right:6px;filter:brightness(0) invert(1);" alt="–ö–æ—Ä–∑–∏–Ω–∞">
–í –∫–æ—Ä–∑–∏–Ω—É
`;
}
}
function toggleFavorite(id) {
const index = favorites.indexOf(id);
if (index === -1) favorites.push(id);
else favorites.splice(index, 1);
localStorage.setItem('fav', JSON.stringify(favorites));
renderHomePreviews();
renderFavorites();
}
function toggleFavoriteDetail() {
toggleFavorite(currentDetailId);
const isChecked = favorites.includes(currentDetailId);
document.getElementById('detail-fav-btn').innerHTML = isChecked ? `
<svg width="16" height="16" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="currentColor" stroke="none">
<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
</svg>
–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º
` : `
<svg width="16" height="16" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
</svg>
–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
`;
}
// === –§–£–ù–ö–¶–ò–ò –ì–ê–õ–ï–†–ï–ò - –¢–û–õ–¨–ö–û –í –î–ï–¢–ê–õ–¨–ù–û–ô –°–¢–†–ê–ù–ò–¶–ï ===
function updateDetailGallery(ad) {
const slidesContainer = document.getElementById('detailGallerySlides');
const dotsContainer = document.getElementById('detailGalleryDots');
const slides = slidesContainer.querySelectorAll('.detail-gallery-slide');
const dots = dotsContainer.querySelectorAll('.detail-gallery-dot');
slidesContainer.style.transform = `translateX(${-detailCurrentImage * 100}%)`;
dots.forEach((dot, i) => {
dot.classList.toggle('active', i === detailCurrentImage);
});
}
function changeDetailImage(direction) {
const ad = ALL_ADS.find(a => a.id === currentDetailId);
if (!ad) return;
detailCurrentImage = (detailCurrentImage + direction + ad.images.length) % ad.images.length;
updateDetailGallery(ad);
}
function setDetailImage(index) {
detailCurrentImage = index;
const ad = ALL_ADS.find(a => a.id === currentDetailId);
if (ad) updateDetailGallery(ad);
}
// –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ñ–æ—Ç–æ –¢–û–õ–¨–ö–û –∏–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
function openImageModal() {
const ad = ALL_ADS.find(a => a.id === currentDetailId);
if (!ad) return;
modalImages = ad.images;
modalCurrentImage = detailCurrentImage;
document.getElementById('modal-img').src = modalImages[modalCurrentImage];
document.getElementById('modal-counter').textContent = `${modalCurrentImage + 1}/${modalImages.length}`;
document.getElementById('photo-modal').classList.add('active');
}
function closeImageModal(event) {
if (event.target === document.getElementById('photo-modal') || event.target.classList.contains('modal-close')) {
document.getElementById('photo-modal').classList.remove('active');
}
}
function changeModalImage(direction) {
if (modalImages.length === 0) return;
modalCurrentImage = (modalCurrentImage + direction + modalImages.length) % modalImages.length;
document.getElementById('modal-img').src = modalImages[modalCurrentImage];
document.getElementById('modal-counter').textContent = `${modalCurrentImage + 1}/${modalImages.length}`;
}
// === –§–£–ù–ö–¶–ò–ò –ü–†–û–§–ò–õ–Ø - –ó–ê–Ø–í–ö–ò –ò –ó–ê–ö–ê–ó–´ ===
async function renderMyRequests() {
const container = document.getElementById('my-requests');
const button = document.getElementById('view-all-requests-btn');
try {
const response = await fetch(`${API_BASE}/sell-requests?tg_id=${USER_TG_ID || 'demo'}`);
const requests = await response.json();
// –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏
const activeRequests = requests.filter(r => r.is_active);
if (activeRequests.length === 0) {
container.innerHTML = '<div class="empty-state">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫</div>';
button.style.display = 'none';
showAllRequests = false;
return;
}
// –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
activeRequests.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –∏–ª–∏ –≤—Å–µ, –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ"
const displayRequests = showAllRequests ? activeRequests : activeRequests.slice(0, 3);
container.innerHTML = displayRequests.map(request => `
<div class="request-item">
<div class="request-header">
<span class="request-type ${request.type === 'buy' ? 'buy' : 'sell'}">
${request.type === 'buy' ? '–ö—É–ø–∏—Ç—å' : '–ü—Ä–æ–¥–∞—Ç—å'}
</span>
<span class="request-status ${getStatusClass(request.status)}">${request.status}</span>
</div>
<div class="request-body">
<p><strong>–ò–º—è:</strong> ${request.name}</p>
<p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${request.phone}</p>
<p><strong>–ê–¥—Ä–µ—Å/–†–∞–π–æ–Ω:</strong> ${request.address}</p>
<p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${request.description}</p>
</div>
<div class="request-footer">
${new Date(request.created_at).toLocaleDateString('ru-RU', {day: '2-digit', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit'})}
</div>
</div>
`).join('');
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ", –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–ª—å—à–µ 3 –∑–∞—è–≤–æ–∫ –∏ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ "–≤—Å–µ"
button.style.display = (activeRequests.length > 3 && !showAllRequests) ? 'block' : 'none';
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫:', error);
container.innerHTML = '<div class="empty-state">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
button.style.display = 'none';
}
}
async function renderOrdersHistory() {
const container = document.getElementById('orders-history');
const button = document.getElementById('view-all-orders-btn');
try {
const response = await fetch(`${API_BASE}/orders?tg_id=${USER_TG_ID || 'demo'}`);
const orders = await response.json();
// –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã
const activeOrders = orders.filter(o => o.is_active);
if (activeOrders.length === 0) {
container.innerHTML = '<div class="empty-state">–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>';
button.style.display = 'none';
showAllOrders = false;
return;
}
// –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
activeOrders.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –∏–ª–∏ –≤—Å–µ, –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ"
const displayOrders = showAllOrders ? activeOrders : activeOrders.slice(0, 3);
container.innerHTML = displayOrders.map(order => `
<div class="request-item">
<div class="request-header">
<span class="request-type buy">–ó–∞–∫–∞–∑ ‚Ññ${order.id}</span>
<span class="request-status ${getStatusClass(order.status)}">${order.status}</span>
</div>
<div class="request-body">
${order.items.map(item => `
<p><strong>${item.title}</strong></p>
<p>${item.address} ‚Äî ${item.price}</p>
`).join('<hr style="margin:8px 0;border:0;border-top:1px solid var(--border);">')}
</div>
<div class="request-footer">
${new Date(order.created_at).toLocaleDateString('ru-RU', {day: '2-digit', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit'})}
</div>
</div>
`).join('');
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ", –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–ª—å—à–µ 3 –∑–∞–∫–∞–∑–æ–≤ –∏ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ "–≤—Å–µ"
button.style.display = (activeOrders.length > 3 && !showAllOrders) ? 'block' : 'none';
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤:', error);
container.innerHTML = '<div class="empty-state">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤</div>';
button.style.display = 'none';
}
}
function getStatusClass(status) {
if (status.includes('–ù–æ–≤–∞—è') || status.includes('–ù–æ–≤—ã–π')) return 'new';
if (status.includes('–≤ —Ä–∞–±–æ—Ç–µ') || status.includes('–æ–±—Ä–∞–±')) return 'process';
if (status.includes('–∑–∞–≤–µ—Ä—à') || status.includes('–≥–æ—Ç–æ–≤') || status.includes('–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω')) return 'done';
return 'new';
}
// –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É)
function viewAllRequests() {
showAllRequests = true;
renderMyRequests();
}
// –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É)
function viewAllOrders() {
showAllOrders = true;
renderOrdersHistory();
}
// === –§–£–ù–ö–¶–ò–ò –ü–†–û–î–ê–ñ–ò/–ü–û–ö–£–ü–ö–ò ===
function handleFileSelect(event) {
const files = event.target.files;
selectedPhotos = [];
const previewContainer = document.getElementById('photo-preview');
previewContainer.innerHTML = '';
for (let i = 0; i < files.length && i < 5; i++) {
const file = files[i];
const reader = new FileReader();
reader.onload = function(e) {
selectedPhotos.push(e.target.result);
const photoItem = document.createElement('div');
photoItem.className = 'photo-item';
photoItem.innerHTML = `
<img src="${e.target.result}" alt="–§–æ—Ç–æ">
<button class="photo-remove" onclick="removePhoto(${i})">√ó</button>
`;
previewContainer.appendChild(photoItem);
};
reader.readAsDataURL(file);
}
}
function removePhoto(index) {
selectedPhotos.splice(index, 1);
const previewContainer = document.getElementById('photo-preview');
previewContainer.innerHTML = '';
selectedPhotos.forEach((photo, i) => {
const photoItem = document.createElement('div');
photoItem.className = 'photo-item';
photoItem.innerHTML = `
<img src="${photo}" alt="–§–æ—Ç–æ">
<button class="photo-remove" onclick="removePhoto(${i})">√ó</button>
`;
previewContainer.appendChild(photoItem);
});
}
function setDealType(type) {
document.getElementById('deal-type').value = type === 'buy' ? 'buy' : 'sell';
document.getElementById('sell-form-container').style.display = 'block';
document.getElementById('sell-intro').style.display = 'none';
document.getElementById('sell-success').style.display = 'none';
const title = document.getElementById('form-title');
const addressLabel = document.querySelector('label[for="sell-address"]');
const addressInput = document.getElementById('sell-address');
const descriptionLabel = document.querySelector('label[for="sell-description"]');
const descriptionInput = document.getElementById('sell-description');
if (type === 'buy') {
title.textContent = '–ü–æ–¥–±–æ—Ä –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏';
addressLabel.textContent = '–ò–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π —Ä–∞–π–æ–Ω *';
addressInput.placeholder = '–£–∫–∞–∂–∏—Ç–µ —Ä–∞–π–æ–Ω –∏–ª–∏ –ª–æ–∫–∞—Ü–∏—é, –≥–¥–µ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å';
descriptionLabel.textContent = '–í–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è *';
descriptionInput.placeholder = '–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç, –±—é–¥–∂–µ—Ç, —ç—Ç–∞–∂ –∏ —Ç.–¥.';
} else {
title.textContent = '–ü—Ä–æ–¥–∞–∂–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏';
addressLabel.textContent = '–ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞ *';
addressInput.placeholder = '–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏';
descriptionLabel.textContent = '–û–ø–∏—Å–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ *';
descriptionInput.placeholder = '–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤–∞—à–µ–º –æ–±—ä–µ–∫—Ç–µ: –ø–ª–æ—â–∞–¥—å, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏...';
}
}
async function submitSellForm() {
const name = document.getElementById('sell-name').value.trim();
const phone = document.getElementById('sell-phone').value.trim();
const address = document.getElementById('sell-address').value.trim();
const description = document.getElementById('sell-description').value.trim();
const dealType = document.getElementById('deal-type').value;
if (!name || !phone || !address || !description || !dealType) {
alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
return;
}
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞—è–≤–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
const formData = new FormData();
formData.append('type', dealType);
formData.append('name', name);
formData.append('phone', phone);
formData.append('address', address);
formData.append('description', description);
// –ü–µ—Ä–µ–¥–∞–µ–º tg_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
if (USER_TG_ID) {
formData.append('tg_id', USER_TG_ID);
}
if (selectedPhotos.length > 0) {
for (let i = 0; i < selectedPhotos.length; i++) {
const fileInput = document.querySelector('#file-input');
if (fileInput.files[i]) {
formData.append('photos', fileInput.files[i]);
}
}
}
try {
const response = await fetch(`${API_BASE}/sell-requests`, {
method: 'POST',
body: formData
});
const result = await response.json();
if (result.success) {
document.getElementById('sell-form-container').style.display = 'none';
document.getElementById('sell-intro').style.display = 'none';
document.getElementById('sell-success').style.display = 'block';
// –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ - –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å —Å–µ—Ä–≤–µ—Ä–∞
alert('‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!\n–ù–∞—à —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
// –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å, –µ—Å–ª–∏ –æ–Ω –æ—Ç–∫—Ä—ã—Ç
if (document.getElementById('profile').classList.contains('active')) {
renderMyRequests();
}
} else {
alert('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏: ' + result.message);
}
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:', error);
alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
}
}
function resetSellForm() {
document.getElementById('sell-form-container').style.display = 'none';
document.getElementById('sell-intro').style.display = 'block';
document.getElementById('sell-success').style.display = 'none';
document.getElementById('deal-type').value = '';
document.getElementById('sell-name').value = '';
document.getElementById('sell-phone').value = '';
document.getElementById('sell-address').value = '';
document.getElementById('sell-description').value = '';
document.getElementById('file-input').value = '';
document.getElementById('photo-preview').innerHTML = '';
selectedPhotos = [];
}
function sellGoBack() {
const formContainer = document.getElementById('sell-form-container');
const introContainer = document.getElementById('sell-intro');
if (formContainer.style.display === 'block') {
formContainer.style.display = 'none';
introContainer.style.display = 'block';
document.getElementById('sell-success').style.display = 'none';
} else {
show('home');
}
}
// === –§–£–ù–ö–¶–ò–ò –¢–ï–õ–ï–ì–†–ê–ú –ò –ö–ê–†–¢–´ ===
function initTelegram() {
try {
if (window.Telegram?.WebApp) {
const WebApp = window.Telegram.WebApp;
WebApp.expand();
WebApp.ready();
const user = WebApp.initDataUnsafe?.user;
if (user) {
USER_TG_ID = user.id;
document.getElementById('user-info').innerHTML = `
<strong>${user.first_name || ''} ${user.last_name || ''}</strong><br>
<span style="color:var(--text-secondary);">@${user.username || '‚Äî'}</span><br>
<span style="color:var(--text-secondary);font-size:13px;">ID: ${user.id}</span>
`;
if (user.photo_url) document.getElementById('user-photo').src = user.photo_url;
return;
}
}
// –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/–¥–µ–º–æ
document.getElementById('user-info').innerHTML = `
<strong>–î–µ–º–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</strong><br>
<span style="color:var(--text-secondary);">@demo_user</span><br>
<span style="color:var(--text-secondary);font-size:13px;">ID: demo</span>
`;
} catch (e) {
document.getElementById('user-info').textContent = '–î–µ–º–æ —Ä–µ–∂–∏–º';
}
}
function viewOnMap() {
if (!currentDetailAddress) {
alert('–ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω');
return;
}
const encodedAddress = encodeURIComponent(`–†–æ—Å—Å–∏—è, ${currentDetailAddress}`);
const yandexMapUrl = `https://yandex.ru/maps/?text=${encodedAddress}`;
window.open(yandexMapUrl, '_blank');
}
// === –§–£–ù–ö–¶–ò–ò –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –¢–ï–õ–ï–§–û–ù–ê ===
function showPhoneModal() {
document.getElementById('phone-modal').classList.add('active');
const phoneInput = document.getElementById('phone-input');
phoneInput.value = '';
phoneInput.focus();
phoneInput.addEventListener('input', formatPhoneInput);
}
function closePhoneModal() {
document.getElementById('phone-modal').classList.remove('active');
document.getElementById('phone-input').removeEventListener('input', formatPhoneInput);
}
function formatPhoneInput(e) {
let value = e.target.value.replace(/\D/g, '');
if (value.length === 0) return;
if (value[0] !== '7' && value[0] !== '8') {
value = '7' + value;
}
value = value.substring(0, 11);
let formatted = '+7 ';
if (value.length > 1) formatted += '(' + value.substring(1, 4);
if (value.length >= 4) formatted += ') ' + value.substring(4, 7);
if (value.length >= 7) formatted += '-' + value.substring(7, 9);
if (value.length >= 9) formatted += '-' + value.substring(9, 11);
e.target.value = formatted;
}
async function confirmOrder() {
const phoneInput = document.getElementById('phone-input');
const phone = phoneInput.value.trim();
if (!phone || phone.length < 18) {
alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
phoneInput.focus();
return;
}
// –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
const items = cart.map(id => {
const ad = ALL_ADS.find(a => a.id === id);
return {
id: ad.id,
title: ad.title,
price: ad.price,
address: ad.address
};
});
const orderData = {
items: items,
customer_phone: phone,
customer_name: '–ö–ª–∏–µ–Ω—Ç',
customer_tg_id: USER_TG_ID || 'demo'
};
try {
const response = await fetch(`${API_BASE}/orders`, {
method: 'POST',
headers: {
'Content-Type': 'application/json'
},
body: JSON.stringify(orderData)
});
const result = await response.json();
if (result.success) {
// –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
cart = [];
localStorage.setItem('cart', JSON.stringify(cart));
updateCartUI();
renderCart();
closePhoneModal();
alert(`‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!\n–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${result.order_number}\n–° –≤–∞–º–∏ —Å–≤—è–∂—É—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.`);
// –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ, –µ—Å–ª–∏ –æ–Ω –æ—Ç–∫—Ä—ã—Ç
if (document.getElementById('profile').classList.contains('active')) {
renderOrdersHistory();
}
} else {
alert('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞: ' + result.message);
}
} catch (error) {
console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞:', error);
alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
}
}
// === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
function detectSwipe(element, onSwipeLeft, onSwipeRight) {
let touchStartX = 0;
let touchEndX = 0;
element.addEventListener('touchstart', e => {
touchStartX = e.changedTouches[0].screenX;
}, { passive: true });
element.addEventListener('touchend', e => {
touchEndX = e.changedTouches[0].screenX;
const diff = touchStartX - touchEndX;
const threshold = 50;
if (Math.abs(diff) > threshold) {
isSwiping = true;
if (diff > 0) {
onSwipeLeft();
} else {
onSwipeRight();
}
}
}, { passive: true });
}
document.addEventListener('click', function(e) {
if (e.target.closest('.card-item') && !isSwiping) {
const card = e.target.closest('.card-item');
const id = parseInt(card.querySelector('.card-item__image-container').dataset.id);
currentFromPage = 'home';
viewProperty(id);
}
isSwiping = false;
});
// === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ===
function safeStartApp() {
try {
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
initTelegram();
// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
Promise.all([
loadProperties(),
loadBanners()
]).then(() => {
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
updateCartUI();
// –°–∫—Ä—ã—Ç–∏–µ —Å–ø–ª—ç—à-—ç–∫—Ä–∞–Ω–∞
setTimeout(() => {
const splash = document.getElementById('splash');
if (splash) {
splash.style.opacity = '0';
setTimeout(() => {
if (splash.parentNode) splash.remove();
}, 600);
}
show('home');
}, 1500);
}).catch(error => {
console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
setTimeout(() => {
const splash = document.getElementById('splash');
if (splash && splash.parentNode) splash.remove();
show('home');
}, 3000);
});
} catch (e) {
console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:', e);
setTimeout(() => {
const splash = document.getElementById('splash');
if (splash && splash.parentNode) splash.remove();
show('home');
}, 3000);
}
}
if (document.readyState === 'loading') {
document.addEventListener('DOMContentLoaded', safeStartApp);
} else {
safeStartApp();
}
// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ Escape
document.addEventListener('keydown', function(e) {
if (e.key === 'Escape') {
document.getElementById('photo-modal').classList.remove('active');
document.getElementById('phone-modal').classList.remove('active');
}
});
</script>
</body>
</html>